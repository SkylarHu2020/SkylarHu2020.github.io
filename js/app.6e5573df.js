(function(e){function t(t){for(var n,o,s=t[0],i=t[1],l=t[2],d=0,b=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(c,o)&&c[o]&&b.push(c[o][0]),c[o]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);u&&u(t);while(b.length)b.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,s=1;s<a.length;s++){var i=a[s];0!==c[i]&&(n=!1)}n&&(r.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},c={app:0},r=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=i;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},"321b":function(e,t,a){"use strict";a("ca36")},"52e6":function(e,t,a){e.exports=a.p+"img/callout.5b86dfc8.svg"},"5ef8":function(e,t,a){},"6fdc":function(e,t,a){},7950:function(e,t){e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCAAyADIDASIAAhEBAxEB/8QAGQABAQEBAQEAAAAAAAAAAAAAAAMEAQUH/8QAKhAAAgIBAgMGBwAAAAAAAAAAAAECAxEEEiFBURQxU3GR4RNCUmFik+L/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/APrwB2MXKSjFZb5FRwFlpL33Vt+Q7Jf4UgIgpZRZUk5waTJgAAANehlXCc52NJJYyzIWr4Vp9Zdei9wN2/QZ+T0Y36D8fRmPcvq4efuN33Xr/RFaNTOj4DdGzPc8LkeeXbTUuOcxfPyfUgVAAACtVsIRcZ1Kcc5XHGCQA1rV1xSSpkkuStZ3tsPBl+1mMAXndVtaroUG1jO5sgAAAAAAAAAAAAAAAf/Z"},"83fb":function(e,t,a){},"8b36":function(e,t,a){},"915e":function(e,t){e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCAAyADIDASIAAhEBAxEB/8QAGgABAQADAQEAAAAAAAAAAAAAAAUBAgMEB//EAC8QAAIBAgMDCgcAAAAAAAAAAAABAgMRBBIxIUGhBRMyNFFhcpHB8BRScbHC0eH/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8A+zgAAAYctun8AyAAAAAN2tfS4nTlRhTlN3jOKeZ9ttGaVXalLwv7FqKyxS7EBIjGc+hTlL6L104nqw+Ellq88ks6UUk9q1d+PA7YulWrUlGhV5qWZNvuPRuAk4rDzwuGlVdSDtayyvbxJvxlVWd4Ndli5ynBTwFROST1V97ItDCu6lNWtu/YHrc7OwNsqAGtXocPPZ6lsitZqlOPzTiuN/QtAAABJxSc8bUzNvK7R7lZaeZqlY6Yrrk/e5HMAAAM0eu0PH+LK4AAAAS8V12fvcjmAAAAH//Z"},aebc:function(e,t,a){"use strict";a("5ef8")},c63b:function(e,t,a){"use strict";a("83fb")},ca36:function(e,t,a){},cd49:function(e,t,a){"use strict";a.r(t);var n=a("9ab4"),c=a("7a23");const r={class:"container"};function o(e,t,a,n,o,s){const i=Object(c["B"])("global-header"),l=Object(c["B"])("loader"),u=Object(c["B"])("router-view"),d=Object(c["B"])("global-footer");return Object(c["t"])(),Object(c["e"])("div",r,[Object(c["i"])(i,{user:e.currentUser},null,8,["user"]),e.isLoading?(Object(c["t"])(),Object(c["e"])(l,{key:0})):Object(c["f"])("",!0),Object(c["i"])(u),Object(c["i"])(d)])}a("ab8b");const s={class:"navbar navbar-dark bg-primary justify-content-between mb-4 px-4"},i=Object(c["h"])("Know it all"),l={key:0,class:"list-inline mb-0"},u={class:"list-inline-item"},d=Object(c["h"])("Sign In"),b={class:"list-inline-item"},m=Object(c["h"])("Sign Up"),j={key:1,class:"list-inline mb-0"},p={class:"list-inline-item"},O=Object(c["h"])("New Essay"),f=Object(c["h"])("My Column"),v=Object(c["i"])("a",{href:"#",class:"dropdown-item"},"Edit Info",-1),A={href:"#",class:"dropdown-item"};function g(e,t,a,n,r,o){const g=Object(c["B"])("router-link"),y=Object(c["B"])("dropdown-item"),h=Object(c["B"])("dropdown");return Object(c["t"])(),Object(c["e"])("nav",s,[Object(c["i"])(g,{class:"navbar-brand",to:"/"},{default:Object(c["J"])(()=>[i]),_:1}),e.user.isLogin?(Object(c["t"])(),Object(c["e"])("ul",j,[Object(c["i"])("li",p,[Object(c["i"])(h,{title:"Hi "+e.user.nickName},{default:Object(c["J"])(()=>[Object(c["i"])(y,null,{default:Object(c["J"])(()=>[Object(c["i"])(g,{to:"/create",class:"dropdown-item"},{default:Object(c["J"])(()=>[O]),_:1})]),_:1}),Object(c["i"])(y,null,{default:Object(c["J"])(()=>[Object(c["i"])(g,{to:"/column/"+e.user.column,class:"dropdown-item"},{default:Object(c["J"])(()=>[f]),_:1},8,["to"])]),_:1}),Object(c["i"])(y,null,{default:Object(c["J"])(()=>[v]),_:1}),Object(c["i"])(y,null,{default:Object(c["J"])(()=>[Object(c["i"])("a",A,[Object(c["i"])("div",{onClick:t[1]||(t[1]=(...t)=>e.logout(...t))},"Sign Out")])]),_:1})]),_:1},8,["title"])])])):(Object(c["t"])(),Object(c["e"])("ul",l,[Object(c["i"])("li",u,[Object(c["i"])(g,{to:"/login",class:"btn btn-outline-light my-2"},{default:Object(c["J"])(()=>[d]),_:1})]),Object(c["i"])("li",b,[Object(c["i"])(g,{to:"/signup",class:"btn btn-outline-light my-2"},{default:Object(c["J"])(()=>[m]),_:1})])]))])}const y={class:"dropdown",ref:"dropdownRef"},h={key:0,class:"dropdown-menu",style:{display:"block"}};function w(e,t,a,n,r,o){return Object(c["t"])(),Object(c["e"])("div",y,[Object(c["i"])("a",{href:"#",class:"btn btn-outline-light my-2 dropdown-toggle",onClick:t[1]||(t[1]=Object(c["L"])((...t)=>e.toggleOpen(...t),["prevent"]))},Object(c["D"])(e.title),1),e.isOpen?(Object(c["t"])(),Object(c["e"])("ul",h,[Object(c["A"])(e.$slots,"default")])):Object(c["f"])("",!0)],512)}var P=function(e){var t=Object(c["y"])(!1),a=function(a){e.value&&(e.value.contains(a.target)?t.value=!1:t.value=!0)};return Object(c["r"])((function(){document.addEventListener("click",a)})),Object(c["s"])((function(){document.removeEventListener("click",a)})),{isClickOutside:t}},k=P,C=Object(c["j"])({name:"Dropdown",props:{title:{type:String,required:!0}},setup:function(){var e=Object(c["y"])(!1),t=Object(c["y"])(null),a=function(){e.value=!e.value},n=k(t).isClickOutside;return Object(c["I"])(n,(function(){e.value&&n.value&&(e.value=!1)})),{isOpen:e,toggleOpen:a,dropdownRef:t,isClickOutside:n}}});C.render=w;var I=C;function B(e,t,a,n,r,o){return Object(c["t"])(),Object(c["e"])("li",{class:["dropdown-option",{"is-disabled":e.disabled}]},[Object(c["A"])(e.$slots,"default")],2)}var D=Object(c["j"])({name:"DropdownItem",props:{disabled:{type:Boolean,default:!1}}});a("c63b");D.render=B;var V=D,M=a("5502"),x=Object(c["j"])({name:"GlobalHeader",components:{Dropdown:I,DropdownItem:V},props:{user:{type:Object,required:!0}},setup:function(){var e=Object(M["b"])(),t=function(){e.commit("logout")};return{logout:t}}});x.render=g;var L=x;const S={class:"text-center py-4 text-secondary bg-light mt-6"},R=Object(c["g"])('<small><ul class="list-inline mb-0"><li class="list-inline-item">@ 2020 know it all</li><li class="list-inline-item">course</li><li class="list-inline-item">document</li><li class="list-inline-item">contact</li><li class="list-inline-item">more</li></ul></small>',1);function U(e,t,a,n,r,o){return Object(c["t"])(),Object(c["e"])("footer",S,[R])}var E=Object(c["j"])({name:"GlobalHeader",components:{}});E.render=U;var _=E;function F(e,t,a,n,r,o){return Object(c["t"])(),Object(c["e"])(c["b"],{to:"#message"},[e.isVisible?(Object(c["t"])(),Object(c["e"])("div",{key:0,class:["alert message-info fixed-top w-50 mx-auto d-flex justify-content-between mt-2",e.classObject]},[Object(c["i"])("span",null,Object(c["D"])(e.message),1),Object(c["i"])("button",{type:"button",class:"btn-close","data-dismiss":"alert","aria-label":"Close",onClick:t[1]||(t[1]=Object(c["L"])((...t)=>e.hide(...t),["prevent"]))})],2)):Object(c["f"])("",!0)])}function Q(e){var t=document.createElement("div");t.id=e,document.body.appendChild(t),Object(c["s"])((function(){document.body.removeChild(t)}))}var J=Q,z=Object(c["j"])({name:"Message",props:{message:String,type:{type:String,default:"default"}},emits:["close-message"],setup:function(e,t){J("message");var a=Object(c["y"])(!0),n={"alert-success":"success"===e.type,"alert-danger":"error"===e.type,"alert-primary":"default"===e.type},r=function(){a.value=!1,t.emit("close-message",!0)};return{classObject:n,isVisible:a,hide:r}}});z.render=F;var N=z,T=function(e,t,a){void 0===a&&(a=2e3);var n=Object(c["d"])(N,{message:e,type:t}),r=document.createElement("div");document.body.appendChild(r),n.mount(r),setTimeout((function(){n.unmount(r),document.body.removeChild(r)}),a)},q=T;const H={class:"loading-content"},G={class:"spinner-border text-primary",role:"status"},Z={class:"visually-hidden"},K={key:0,class:"text-primary small"};function $(e,t,a,n,r,o){return Object(c["t"])(),Object(c["e"])(c["b"],{to:"#back"},[Object(c["i"])("div",{class:"d-flex justify-content-center align-items-center h-100 loading-container",style:{backgroundColor:e.background||""}},[Object(c["i"])("div",H,[Object(c["i"])("div",G,[Object(c["i"])("span",Z,Object(c["D"])(e.text||"loading"),1)]),e.text?(Object(c["t"])(),Object(c["e"])("p",K,Object(c["D"])(e.text),1)):Object(c["f"])("",!0)])],4)])}var X=Object(c["j"])({props:{text:{type:String},background:{type:String}},setup:function(){J("back")}});a("aebc");X.render=$;var Y=X,W=Object(c["j"])({name:"App",components:{GlobalHeader:L,GlobalFooter:_,Loader:Y},setup:function(){var e=Object(M["b"])(),t=Object(c["c"])((function(){return e.state.user})),a=Object(c["c"])((function(){return e.state.loading})),n=Object(c["c"])((function(){return e.state.error}));return Object(c["I"])((function(){return n.value.status}),(function(){var e=n.value,t=e.status,a=e.message;t&&a&&q(a,"error")})),{currentUser:t,isLoading:a,error:n}}});W.render=o;var ee=W,te=a("6c02"),ae=a("52e6"),ne=a.n(ae);const ce={class:"home-page"},re=Object(c["i"])("section",{class:"py-5 text-center container"},[Object(c["i"])("div",{class:"row py-lg-5"},[Object(c["i"])("div",{class:"col-lg-6 col-md-8 mx-auto"},[Object(c["i"])("img",{src:ne.a,alt:"callout",class:"w-50"}),Object(c["i"])("h2",{class:"font-weight-light"},"free notes"),Object(c["i"])("p",null,[Object(c["i"])("a",{href:"#",class:"btn btn-primary my-2"},"start write")])])])],-1),oe=Object(c["i"])("h4",{class:"font-weight-bold text-center"},"find something great",-1);function se(e,t,a,n,r,o){const s=Object(c["B"])("column-list");return Object(c["t"])(),Object(c["e"])("div",ce,[re,oe,Object(c["i"])(s,{list:e.list},null,8,["list"]),e.isLastPage?Object(c["f"])("",!0):(Object(c["t"])(),Object(c["e"])("button",{key:0,class:"btn btn-primary mt-2 mb-5 mx-auto btn-block w-25",onClick:t[1]||(t[1]=(...t)=>e.loadMorePage(...t))},"Load More"))])}const ie=Object(c["M"])("data-v-3c255c1e");Object(c["w"])("data-v-3c255c1e");const le={class:"row"},ue={class:"card h-100 shadow-sm"},de={class:"card-body text-center"},be={class:"card-title"},me={class:"card-text text-left"},je=Object(c["h"])("enter the content");Object(c["u"])();const pe=ie((function(e,t,a,n,r,o){const s=Object(c["B"])("router-link");return Object(c["t"])(),Object(c["e"])("div",le,[(Object(c["t"])(!0),Object(c["e"])(c["a"],null,Object(c["z"])(e.columnList,e=>(Object(c["t"])(),Object(c["e"])("div",{key:e._id,class:"col-4 mb-4"},[Object(c["i"])("div",ue,[Object(c["i"])("div",de,[Object(c["i"])("img",{src:e.avatar&&e.avatar.url,alt:e.title,class:"rounded-circle border border-light my-3"},null,8,["src","alt"]),Object(c["i"])("h5",be,Object(c["D"])(e.title),1),Object(c["i"])("p",me,Object(c["D"])(e.description),1),Object(c["i"])(s,{to:"/column/"+e._id,class:"btn btn-outline-primary"},{default:ie(()=>[je]),_:2},1032,["to"])])])]))),128))])}));var Oe=Object(c["j"])({name:"ColumnList",props:{list:{type:Array,required:!0}},setup:function(e){var t=Object(c["c"])((function(){return e.list.map((function(e){return e.avatar||(e.avatar={url:a("7950")}),e}))}));return{columnList:t}}});a("f8c6");Oe.render=pe,Oe.__scopeId="data-v-3c255c1e";var fe=Oe,ve=function(e,t,a){void 0===a&&(a={cid:"",currentPage:2,pageSize:5});var n=Object(M["b"])(),r=Object(c["y"])(a.currentPage),o=Object(c["c"])((function(){return{cid:a.cid,currentPage:r.value,pageSize:a.pageSize}})),s=function(){n.dispatch(e,o.value).then((function(){r.value++}))},i=Object(c["c"])((function(){return Math.ceil(t.value/a.pageSize)<r.value}));return{loadMorePage:s,isLastPage:i,currentPage:r}},Ae=ve,ge=Object(c["j"])({name:"Home",components:{ColumnList:fe},setup:function(){var e=Object(M["b"])(),t=Object(c["c"])((function(){return e.getters.getColumns})),a=Object(c["c"])((function(){return e.state.columns.total})),n=Object(c["c"])((function(){return e.state.columns.currentPage}));Object(c["r"])((function(){e.dispatch("fetchColumns",{pageSize:3})}));var r=Ae("fetchColumns",a,{pageSize:3,currentPage:n.value?n.value+1:2}),o=r.loadMorePage,s=r.isLastPage;return{list:t,loadMorePage:o,isLastPage:s}}});ge.render=se;var ye=ge;const he={class:"container"},we={class:"mb-3"},Pe=Object(c["i"])("label",{class:"form-label"},"Email Address",-1),ke={class:"mb-3"},Ce=Object(c["i"])("label",{class:"form-label"},"Password",-1),Ie=Object(c["i"])("span",{class:"btn btn-primary"},"Submit",-1);function Be(e,t,a,n,r,o){const s=Object(c["B"])("validate-input"),i=Object(c["B"])("validate-form");return Object(c["t"])(),Object(c["e"])("div",he,[Object(c["i"])(i,{"onForm-submit":e.onFormSubmit},{submit:Object(c["J"])(()=>[Ie]),default:Object(c["J"])(()=>[Object(c["i"])("div",we,[Pe,Object(c["i"])(s,{rules:e.emailRules,modelValue:e.emailVal,"onUpdate:modelValue":t[1]||(t[1]=t=>e.emailVal=t),placeholder:"please enter your email",type:"text",ref:"inputRef"},null,8,["rules","modelValue"])]),Object(c["i"])("div",ke,[Ce,Object(c["i"])(s,{type:"password",placeholder:"Please enter your password",rules:e.passwordRules,modelValue:e.passwordVal,"onUpdate:modelValue":t[2]||(t[2]=t=>e.passwordVal=t)},null,8,["rules","modelValue"])])]),_:1},8,["onForm-submit"])])}const De={class:"validate-input-container pb-3"},Ve={key:2,class:"invalid-feedback"};function Me(e,t,a,n,r,o){return Object(c["t"])(),Object(c["e"])("div",De,["textarea"!==e.tag?Object(c["K"])((Object(c["t"])(),Object(c["e"])("input",Object(c["n"])({key:0,class:["form-control",{"is-invalid":e.inputRef.error}],onBlur:t[1]||(t[1]=(...t)=>e.validateInput(...t)),"onUpdate:modelValue":t[2]||(t[2]=t=>e.inputRef.val=t)},e.$attrs),null,16)),[[c["F"],e.inputRef.val]]):Object(c["K"])((Object(c["t"])(),Object(c["e"])("textarea",Object(c["n"])({key:1,class:["form-control",{"is-invalid":e.inputRef.error}],onBlur:t[3]||(t[3]=(...t)=>e.validateInput(...t)),"onUpdate:modelValue":t[4]||(t[4]=t=>e.inputRef.val=t)},e.$attrs),null,16)),[[c["G"],e.inputRef.val]]),e.inputRef.error?(Object(c["t"])(),Object(c["e"])("span",Ve,Object(c["D"])(e.inputRef.message),1)):Object(c["f"])("",!0)])}const xe={class:"validate-form-container"},Le=Object(c["i"])("button",{type:"submit",class:"btn btn-primary"},"Submit",-1);function Se(e,t,a,n,r,o){return Object(c["t"])(),Object(c["e"])("form",xe,[Object(c["A"])(e.$slots,"default"),Object(c["i"])("div",{class:"submit-area",onClick:t[1]||(t[1]=Object(c["L"])((...t)=>e.submitForm(...t),["prevent"]))},[Object(c["A"])(e.$slots,"submit",{},()=>[Le])])])}var Re=a("14b7"),Ue=Object(Re["a"])(),Ee=Object(c["j"])({emits:["form-submit"],setup:function(e,t){var a=[],n=function(){var e=!1;e=!!a&&a.map((function(e){return e()})).every((function(e){return e})),t.emit("form-submit",e)},r=function(e){e&&a.push(e)};return Ue.on("form-item-created",r),Object(c["s"])((function(){Ue.off("form-item-created",r),a=[]})),{submitForm:n}}});Ee.render=Se;var _e=Ee,Fe=/^[a-zA-Z0-9.!#$%&â€™*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,Qe=Object(c["j"])({props:{rules:Array,modelValue:String,tag:{type:String,default:"input"}},inheritAttrs:!1,setup:function(e,t){var a=Object(c["x"])({val:Object(c["c"])({get:function(){return e.modelValue||""},set:function(e){return t.emit("update:modelValue",e)}}),error:!1,message:""}),n=function(){if(e.rules){var t=e.rules.every((function(e){var t=!0;switch(a.message=e.message,e.type){case"required":t=""!==a.val.trim();break;case"email":t=Fe.test(a.val);break;case"custom":t=!e.validator||e.validator();break;default:break}return t}));return a.error=!t,t}return!0};return Object(c["r"])((function(){Ue.emit("form-item-created",n)})),{inputRef:a,validateInput:n}}});Qe.render=Me;var Je=Qe,ze=Object(c["j"])({name:"App",components:{ValidateInput:Je,ValidateForm:_e},setup:function(){var e=this,t=Object(c["y"])(),a=Object(c["y"])(""),r=Object(te["d"])(),o=Object(M["b"])(),s=[{type:"required",message:"The email can not be empty."},{type:"email",message:"Please enter a valid email."}],i=Object(c["y"])(""),l=[{type:"required",message:"The password can not be empty"}],u=function(t){return Object(n["b"])(e,void 0,void 0,(function(){var e,c;return Object(n["c"])(this,(function(n){switch(n.label){case 0:if(!t)return[3,5];e={email:a.value,password:i.value},n.label=1;case 1:return n.trys.push([1,4,,5]),[4,o.dispatch("login",e)];case 2:return n.sent(),[4,o.dispatch("fetchCurrentUser")];case 3:return n.sent(),q("Login successful!","success"),setTimeout((function(){r.push("/")}),2e3),[3,5];case 4:return c=n.sent(),console.log(c),[3,5];case 5:return[2]}}))}))};return{emailRules:s,emailVal:a,passwordVal:i,passwordRules:l,onFormSubmit:u,inputRef:t}}});ze.render=Be;var Ne=ze;const Te={class:"column-detail-page w-75 mx-auto"},qe={class:"column-info row mb-4 bordder-bottom pb-4 align-items-center"},He={class:"col-3 text-center"},Ge={class:"col-9"},Ze={class:"text-muted"};function Ke(e,t,a,n,r,o){const s=Object(c["B"])("post-list");return Object(c["t"])(),Object(c["e"])("div",Te,[Object(c["i"])("div",qe,[Object(c["i"])("div",He,[Object(c["i"])("img",{src:e.column.avatar&&e.column.avatar.url,alt:e.column.title,class:"rounded-circle border w-100"},null,8,["src","alt"])]),Object(c["i"])("div",Ge,[Object(c["i"])("h4",null,Object(c["D"])(e.column.title)+"/",1),Object(c["i"])("p",Ze,Object(c["D"])(e.column.description),1)])]),Object(c["i"])(s,{list:e.list},null,8,["list"]),e.isLastPage?Object(c["f"])("",!0):(Object(c["t"])(),Object(c["e"])("button",{key:0,class:"btn btn-primary mt-2 mb-5 mx-auto btn-block w-25",onClick:t[1]||(t[1]=(...t)=>e.loadMorePage(...t))},"Load More"))])}const $e=Object(c["M"])("data-v-05ebe581");Object(c["w"])("data-v-05ebe581");const Xe={class:"post-list"},Ye={class:"card-body"},We={class:"row my-3 align-items-center"},et={key:0,class:"col-3"},tt={class:"text-muted"};Object(c["u"])();const at=$e((function(e,t,a,n,r,o){const s=Object(c["B"])("router-link");return Object(c["t"])(),Object(c["e"])("div",Xe,[(Object(c["t"])(!0),Object(c["e"])(c["a"],null,Object(c["z"])(e.list,e=>(Object(c["t"])(),Object(c["e"])("article",{key:e._id,class:"card mb-3 shadow-sm"},[Object(c["i"])("div",Ye,[Object(c["i"])("h4",null,[Object(c["i"])(s,{to:`/posts/${e._id}/`},{default:$e(()=>[Object(c["h"])(Object(c["D"])(e.title),1)]),_:2},1032,["to"])]),Object(c["i"])("div",We,[e.image?(Object(c["t"])(),Object(c["e"])("div",et,[Object(c["i"])("img",{src:e.image&&e.image.url,alt:e.title,class:"rounded-lg w-100"},null,8,["src","alt"])])):Object(c["f"])("",!0),Object(c["i"])("p",{class:{"col-9":e.image}},Object(c["D"])(e.excerpt),3)]),Object(c["i"])("span",tt,Object(c["D"])(e.createdAt),1)])]))),128))])}));var nt=Object(c["j"])({props:{list:{required:!0,type:Array}}});a("d83b");nt.render=at,nt.__scopeId="data-v-05ebe581";var ct=nt,rt=Object(c["j"])({components:{PostList:ct},setup:function(){var e=Object(te["c"])(),t=Object(M["b"])(),a=e.params.id,n=Object(c["c"])((function(){return t.state.posts.loadedColumns[a]?t.state.posts.loadedColumns[a].total:0})),r=Object(c["c"])((function(){return t.state.posts.loadedColumns[a]?t.state.posts.loadedColumns[a].currentPage:1}));Object(c["r"])((function(){t.dispatch("fetchColumn",a),t.dispatch("fetchPosts",{cid:a,pageSize:3})}));var o=Object(c["c"])((function(){return t.getters.getColumnById(a)})),s=Object(c["c"])((function(){return t.getters.getPostsByCid(a)})),i=Ae("fetchPosts",n,{cid:a,pageSize:3,currentPage:r.value?r.value+1:2}),l=i.loadMorePage,u=i.isLastPage;return{column:o,list:s,loadMorePage:l,isLastPage:u}}});rt.render=Ke;var ot=rt;const st={class:"create-post-page"},it=Object(c["i"])("h1",null,"Click to upload",-1),lt=Object(c["i"])("div",{class:"d-flex"},[Object(c["i"])("div",{class:"spinner-border text-secondary",role:"status"},[Object(c["i"])("span",{class:"sr-only"},"Loading...")]),Object(c["i"])("h2",null,"is Uploading...")],-1),ut={class:"mb-3"},dt=Object(c["i"])("label",{class:"form-label"},"Title: ",-1),bt={class:"mb-3"},mt=Object(c["i"])("label",{class:"form-label"},"Content: ",-1),jt={class:"btn btn-primary btn-large"};function pt(e,t,a,n,r,o){const s=Object(c["B"])("uploader"),i=Object(c["B"])("validate-input"),l=Object(c["B"])("validate-form");return Object(c["t"])(),Object(c["e"])("div",st,[Object(c["i"])("h4",null,Object(c["D"])(e.isEditMode?"Edit Essay":"Create Essay"),1),Object(c["i"])(s,{action:"/upload",beforeUpload:e.uploadCheck,uploaded:e.uploadedData,"onFile-uploaded":e.handleFileUploaded,"onFile-uploaded-error":e.onFileUploadedError,class:"d-flex align-items-center justify-content-center bg-light text-secondary w-100 my-4"},{loading:Object(c["J"])(()=>[lt]),uploaded:Object(c["J"])(e=>[Object(c["i"])("img",{src:e.uploadedData.data.url},null,8,["src"])]),default:Object(c["J"])(()=>[it]),_:1},8,["beforeUpload","uploaded","onFile-uploaded","onFile-uploaded-error"]),Object(c["i"])(l,{"onForm-submit":e.onFormSubmit},{submit:Object(c["J"])(()=>[Object(c["i"])("button",jt,Object(c["D"])(e.isEditMode?"Edit":"Create"),1)]),default:Object(c["J"])(()=>[Object(c["i"])("div",ut,[dt,Object(c["i"])(i,{rules:e.titleRules,modelValue:e.titleVal,"onUpdate:modelValue":t[1]||(t[1]=t=>e.titleVal=t),palceholder:"Please enter the essay title",type:"text"},null,8,["rules","modelValue"])]),Object(c["i"])("div",bt,[mt,Object(c["i"])(i,{rules:e.contentRules,modelValue:e.contentVal,"onUpdate:modelValue":t[2]||(t[2]=t=>e.contentVal=t),placeholder:"Please enter the content",type:"text",tag:"textarea",rows:"10"},null,8,["rules","modelValue"])])]),_:1},8,["onForm-submit"])])}const Ot={class:"file-upload"},ft=Object(c["i"])("button",{class:"btn btn-primary",disabled:""},"uploading...",-1),vt=Object(c["i"])("button",{class:"btn btn-primary"},"uploaded successfully!",-1),At=Object(c["i"])("button",{class:"btn btn-primary"},"upload",-1);function gt(e,t,a,n,r,o){return Object(c["t"])(),Object(c["e"])("div",Ot,[Object(c["i"])("div",Object(c["n"])({class:"file-upload-container",onClick:t[1]||(t[1]=Object(c["L"])((...t)=>e.triggerUpload(...t),["prevent"]))},e.$attrs),["loading"===e.fileStatus?Object(c["A"])(e.$slots,"loading",{key:0},()=>[ft]):"success"===e.fileStatus?Object(c["A"])(e.$slots,"uploaded",{key:1,uploadedData:e.uploadedData},()=>[vt]):Object(c["A"])(e.$slots,"default",{key:2},()=>[At])],16),Object(c["i"])("input",{type:"file",class:"file-input d-none",ref:"fileInput",onChange:t[2]||(t[2]=(...t)=>e.handleFileChange(...t))},null,544)])}var yt=a("bc3a"),ht=a.n(yt),wt=Object(c["j"])({name:"Uploader",props:{action:{type:String,required:!0},beforeUpload:{type:Function},uploaded:{type:Object}},inheritAttrs:!1,emits:["file-uploaded","file-uploaded-error"],setup:function(e,t){var a=this,r=Object(c["y"])(null),o=Object(c["y"])(e.uploaded?"success":"ready"),s=Object(c["y"])(e.uploaded);Object(c["I"])((function(){return e.uploaded}),(function(e){e&&(o.value="success",s.value=e)}));var i=function(){r.value&&r.value.click()},l=function(c){return Object(n["b"])(a,void 0,void 0,(function(){var a,i,l,u,d,b;return Object(n["c"])(this,(function(n){switch(n.label){case 0:if(a=c.target,!a.files)return[3,5];if(i=Array.from(a.files),e.beforeUpload&&(l=e.beforeUpload(i[0]),!l))return[2];o.value="loading",u=new FormData,u.append("file",i[0]),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,ht.a.post(e.action,u,{headers:{"Content-Type":"multipart/form-data"}})];case 2:return d=n.sent(),o.value="success",s.value=d.data,t.emit("file-uploaded",d.data),console.log(d),[3,5];case 3:return b=n.sent(),o.value="error",t.emit("file-uploaded-error",{e:b}),[3,5];case 4:return r.value&&(r.value.value=""),[7];case 5:return[2]}}))}))};return{fileInput:r,fileStatus:o,handleFileChange:l,triggerUpload:i,uploadedData:s}}});wt.render=gt;var Pt=wt;function kt(e,t){var a=t.format,n=t.size,c=!a||a.includes(e.type),r=!n||e.size/1024/1024<n,o=null;return c||(o="format"),r||(o="size"),{passed:r&&c,error:o}}function Ct(e,t,a,n){if(void 0===n&&(n=["m_pad"]),e&&e.url){var c=n.reduce((function(e,t){return t+","+e}),"");e.url=e.url+"?x-oss-process=image/resize,"+c+"h_"+a+",w_"+t}}function It(e,t,n){if(e.avatar)Ct(e.avatar,t,n);else{var c=e;e.avatar={url:a(c.title?"7950":"915e")}}}var Bt=function(e){return e.reduce((function(e,t){return t._id&&(e[t._id]=t),e}),{})},Dt=function(e){return Object.keys(e).map((function(t){return e[t]}))},Vt=Object(c["j"])({name:"CreatePost",components:{ValidateForm:_e,ValidateInput:Je,Uploader:Pt},setup:function(){var e=Object(c["y"])(),t=Object(M["b"])(),a=Object(te["d"])(),n=Object(te["c"])(),r=!!n.query.id,o=Object(c["y"])(""),s=Object(c["y"])(""),i="",l=[{type:"required",message:"The title can not be empty."}],u=[{type:"required",message:"The content can not be empty"}];Object(c["r"])((function(){r&&t.dispatch("fetchPost",n.query.id).then((function(t){var a=t.data;a.image&&(e.value={data:a.image}),o.value=a.title,s.value=a.content||""}))}));var d=function(e){e.data._id&&(i=e.data._id)},b=function(e){if(e){var c=t.state.user,l=c.column,u=c._id;if(l){var d={title:o.value,content:s.value,column:l,author:u};i&&(d.image=i);var b=r?"updatePost":"createPost",m=r?{id:n.query.id,payload:d}:d;t.dispatch(b,m).then((function(){q("Post successfully!","success"),setTimeout((function(){a.push({name:"column",params:{id:l}})}),2e3)}))}}},m=function(e){q("image uploaded failed, "+e.msg,"error")},j=function(e){var t=kt(e,{format:["image/jpeg","image/png"],size:1}),a=t.passed,n=t.error;return"format"===n&&q("only JPG/PNG format images allowed to upload","error"),"size"===n&&q("The size is limited to 1 Mb","error"),a};return{titleVal:o,contentVal:s,titleRules:l,contentRules:u,onFormSubmit:b,handleFileUploaded:d,onFileUploadedError:m,uploadCheck:j,uploadedData:e,isEditMode:r}}});a("321b");Vt.render=pt;var Mt=Vt;const xt={class:"container"},Lt={class:"mb-3"},St=Object(c["i"])("label",{class:"form-label"},"Email Address",-1),Rt={class:"mb-3"},Ut=Object(c["i"])("label",{class:"form-label"},"Nick Name",-1),Et={class:"mb-3"},_t=Object(c["i"])("label",{class:"form-label"},"Password",-1),Ft={class:"mb-3"},Qt=Object(c["i"])("label",{class:"form-label"},"Confirm Password",-1);function Jt(e,t,a,n,r,o){const s=Object(c["B"])("validate-input"),i=Object(c["B"])("validate-form");return Object(c["t"])(),Object(c["e"])("div",xt,[Object(c["i"])(i,{"onForm-submit":e.onFormSubmit},{default:Object(c["J"])(()=>[Object(c["i"])("div",Lt,[St,Object(c["i"])(s,{rules:e.emailRules,modelValue:e.emailVal,"onUpdate:modelValue":t[1]||(t[1]=t=>e.emailVal=t),placeholder:"please enter your email",type:"text",ref:"inputRef"},null,8,["rules","modelValue"])]),Object(c["i"])("div",Rt,[Ut,Object(c["i"])(s,{rules:e.nickNameRules,modelValue:e.nickNameVal,"onUpdate:modelValue":t[2]||(t[2]=t=>e.nickNameVal=t),placeholder:"please enter your nick name",type:"text"},null,8,["rules","modelValue"])]),Object(c["i"])("div",Et,[_t,Object(c["i"])(s,{type:"password",placeholder:"Please enter your password",rules:e.passwordRules,modelValue:e.passwordVal,"onUpdate:modelValue":t[3]||(t[3]=t=>e.passwordVal=t)},null,8,["rules","modelValue"])]),Object(c["i"])("div",Ft,[Qt,Object(c["i"])(s,{type:"password",placeholder:"Please confirm your password",rules:e.confirmPasswordRules,modelValue:e.confirmPasswordVal,"onUpdate:modelValue":t[4]||(t[4]=t=>e.confirmPasswordVal=t)},null,8,["rules","modelValue"])])]),_:1},8,["onForm-submit"])])}var zt=Object(c["j"])({name:"Signup",components:{ValidateForm:_e,ValidateInput:Je},setup:function(){var e=this,t=Object(c["y"])(),a=Object(te["d"])(),r=Object(c["y"])(""),o=[{type:"required",message:"The email can not be empty."},{type:"email",message:"Please enter a valid email."}],s=Object(c["y"])(""),i=[{type:"required",message:"The nick name can not be empty"}],l=Object(c["y"])(""),u=[{type:"required",message:"The password can not be empty"}],d=Object(c["y"])(""),b=[{type:"required",message:"The password can not be empty"},{type:"custom",validator:function(){return d.value===l.value},message:"The confirm password is not the same as password"}],m=function(t){return Object(n["b"])(e,void 0,void 0,(function(){var e,c;return Object(n["c"])(this,(function(n){switch(n.label){case 0:if(!t)return[3,4];e={email:r.value,nickName:s.value,password:l.value},n.label=1;case 1:return n.trys.push([1,3,,4]),[4,ht.a.post("/users/",e)];case 2:return n.sent(),q("Signup successful!","success"),setTimeout((function(){a.push("/login")}),2e3),[3,4];case 3:return c=n.sent(),console.log(c),[3,4];case 4:return[2]}}))}))};return{inputRef:t,emailVal:r,emailRules:o,nickNameVal:s,nickNameRules:i,passwordVal:l,passwordRules:u,confirmPasswordVal:d,confirmPasswordRules:b,onFormSubmit:m}}});zt.render=Jt;var Nt=zt;const Tt={class:"post-detail-page"},qt=Object(c["i"])("p",null,"Are you sure to delete it?",-1),Ht={key:0,class:"w-75 mx-auto mb-5 pb-3"},Gt={class:"mb-4"},Zt={class:"user-profile-component border-top border-bottom py-3 mb-5 align-items-center row g-0"},Kt={class:"col"},$t={class:"text-muted col text-right font-italic"},Xt={key:1,class:"btn-group mt-5"},Yt=Object(c["h"])("Edit");function Wt(e,t,a,n,r,o){const s=Object(c["B"])("modal"),i=Object(c["B"])("user-profile"),l=Object(c["B"])("router-link");return Object(c["t"])(),Object(c["e"])("div",Tt,[Object(c["i"])(s,{title:"delete essay",visible:e.modalIsVisible,"onModal-on-close":t[1]||(t[1]=t=>e.modalIsVisible=!1),"onModal-on-confirm":e.hideAndDelete},{default:Object(c["J"])(()=>[qt]),_:1},8,["visible","onModal-on-confirm"]),e.currentPost?(Object(c["t"])(),Object(c["e"])("article",Ht,[e.currentImageUrl?(Object(c["t"])(),Object(c["e"])("img",{key:0,src:e.currentImageUrl,alt:e.currentPost.title,class:"rounded-lg img-fluid my-4"},null,8,["src","alt"])):Object(c["f"])("",!0),Object(c["i"])("h2",Gt,Object(c["D"])(e.currentPost.title),1),Object(c["i"])("div",Zt,[Object(c["i"])("div",Kt,["object"===typeof e.currentPost.author?(Object(c["t"])(),Object(c["e"])(i,{key:0,user:e.currentPost.author},null,8,["user"])):Object(c["f"])("",!0)]),Object(c["i"])("span",$t,"released at: "+Object(c["D"])(e.currentPost.createdAt),1)]),Object(c["i"])("div",{innerHTML:e.currentHTML},null,8,["innerHTML"]),e.showEditArea?(Object(c["t"])(),Object(c["e"])("div",Xt,[Object(c["i"])(l,{to:{name:"create",query:{id:e.currentPost._id}},type:"button",class:"btn btn-success"},{default:Object(c["J"])(()=>[Yt]),_:1},8,["to"]),Object(c["i"])("button",{type:"button",class:"btn btn-danger",onClick:t[2]||(t[2]=Object(c["L"])(t=>e.modalIsVisible=!0,["prevent"]))},"Delete")])):Object(c["f"])("",!0)])):Object(c["f"])("",!0)])}const ea={class:"user-profile-component"},ta={class:"d-flex align-items-center"},aa={class:"detail ml-2"},na={class:"d-block mb-0"},ca={class:"text-truncate text-muted d-block"};function ra(e,t,a,n,r,o){return Object(c["t"])(),Object(c["e"])("div",ea,[Object(c["i"])("div",ta,[Object(c["i"])("img",{src:e.fitUrl,alt:e.user.nickName,class:"rounded-circle img-thumbnail"},null,8,["src","alt"]),Object(c["i"])("div",aa,[Object(c["i"])("h6",na,Object(c["D"])(e.user.nickName),1),Object(c["i"])("span",ca,Object(c["D"])(e.user.description),1)])])])}var oa=Object(c["j"])({name:"UserProfile",props:{user:{type:Object,required:!0}},setup:function(e){var t=Object(c["c"])((function(){It(e.user,50,50);var t=e.user.avatar;return t&&t.url}));return{fitUrl:t}}});oa.render=ra;var sa=oa;const ia={key:0,class:"modal d-block",tabindex:"-1"},la={class:"modal-dialog"},ua={class:"modal-content"},da={class:"modal-header"},ba={class:"modal-title"},ma={class:"modal-body"},ja={class:"modal-footer"};function pa(e,t,a,n,r,o){return Object(c["t"])(),Object(c["e"])(c["b"],{to:"#modal"},[e.visible?(Object(c["t"])(),Object(c["e"])("div",ia,[Object(c["i"])("div",la,[Object(c["i"])("div",ua,[Object(c["i"])("div",da,[Object(c["i"])("h5",ba,Object(c["D"])(e.title),1),Object(c["i"])("button",{type:"button",class:"btn-close","data-dismiss":"alert","aria-label":"Close",onClick:t[1]||(t[1]=Object(c["L"])((...t)=>e.onClose(...t),["prevent"]))})]),Object(c["i"])("div",ma,[Object(c["A"])(e.$slots,"default")]),Object(c["i"])("div",ja,[Object(c["i"])("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal",onClick:t[2]||(t[2]=(...t)=>e.onClose(...t))},"Cancel"),Object(c["i"])("button",{type:"button",class:"btn btn-primary",onClick:t[3]||(t[3]=(...t)=>e.onConfirm(...t))},"Confirm")])])])])):Object(c["f"])("",!0)])}var Oa=Object(c["j"])({name:"modal",props:{title:String,visible:{type:Boolean,default:!1}},emits:["modal-on-close","modal-on-confirm"],setup:function(e,t){J("modal");var a=function(){t.emit("modal-on-close")},n=function(){t.emit("modal-on-confirm")};return{onClose:a,onConfirm:n}}});Oa.render=pa;var fa=Oa,va=Object(c["j"])({name:"post-detail",components:{UserProfile:sa,Modal:fa},setup:function(){var e=this,t=Object(M["b"])(),a=Object(te["c"])(),r=Object(te["d"])(),o=Object(c["y"])(!1),s=a.params.id;Object(c["r"])((function(){return Object(n["b"])(e,void 0,void 0,(function(){var e;return Object(n["c"])(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,t.dispatch("fetchPost",s)];case 1:return a.sent(),[3,3];case 2:return e=a.sent(),console.log(e),[3,3];case 3:return[2]}}))}))}));var i=Object(c["c"])((function(){return t.getters.getPostById(s)})),l=Object(c["c"])((function(){return i.value.content})),u=Object(c["c"])((function(){var e=t.state.user,a=e.isLogin,n=e._id;if(i.value&&i.value.author&&a){var c=i.value.author;return c._id===n}return!1})),d=Object(c["c"])((function(){if(i.value&&i.value.image){var e=i.value.image;return e.url+"?x-oss-process=image/resize,w_850"}return null})),b=function(){return Object(n["b"])(e,void 0,void 0,(function(){var e,a;return Object(n["c"])(this,(function(n){switch(n.label){case 0:o.value=!1,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,t.dispatch("deletePost",s)];case 2:return e=n.sent(),q("Congradulations, delete successfully!!","success",2e3),setTimeout((function(){r.push({name:"column",params:{id:e.data.column}})}),2e3),[3,4];case 3:return a=n.sent(),console.log(a),[3,4];case 4:return[2]}}))}))};return{currentPost:i,currentImageUrl:d,currentHTML:l,showEditArea:u,modalIsVisible:o,hideAndDelete:b}}});va.render=Wt;var Aa=va,ga=Object(M["a"])({state:{error:{status:!1},token:localStorage.getItem("token")||"",loading:!1,columns:{data:{},currentPage:0,total:0},posts:{data:{},loadedColumns:{}},user:{isLogin:!1}},mutations:{login:function(e,t){var a=t.data.token;e.token=a,localStorage.setItem("token",a),ht.a.defaults.headers.common.Authorization="Bearer "+a},fetchCurrentUser:function(e,t){e.user=Object(n["a"])({isLogin:!0},t.data)},fetchColumns:function(e,t){var a=e.columns.data,c=t.data,r=c.list,o=c.count,s=c.currentPage;e.columns={data:Object(n["a"])(Object(n["a"])({},a),Bt(r)),total:o,currentPage:1*s}},fetchColumn:function(e,t){var a=t.data;e.columns.data[a._id]=a},fetchPosts:function(e,t){var a=t.rawData,c=t.cid,r=e.posts.data,o=a.data,s=o.list,i=o.count,l=o.currentPage,u={currentPage:1*l,total:i};e.posts.data=Object(n["a"])(Object(n["a"])({},r),Bt(s)),e.posts.loadedColumns[c]=u},fetchPost:function(e,t){var a=t.data;e.posts.data[a._id]=a},deletePost:function(e,t){var a=t.data;delete e.posts.data[a._id]},createPost:function(e,t){e.posts.data[t._id]=t},setLoading:function(e,t){e.loading=t},setError:function(e,t){e.error=t},logout:function(e){e.token="",e.user={isLogin:!1},localStorage.removeItem("token"),delete ht.a.defaults.headers.common.Authorization},updatePost:function(e,t){var a=t.data;e.posts.data[a._id]=a}},actions:{fetchColumns:function(e,t){var a=e.state,c=e.commit;return void 0===t&&(t={}),Object(n["b"])(this,void 0,void 0,(function(){var e,r,o,s,i;return Object(n["c"])(this,(function(n){switch(n.label){case 0:return e=t.currentPage,r=void 0===e?1:e,o=t.pageSize,s=void 0===o?6:o,a.columns.currentPage<r?[4,ht.a.get("/columns?currentPage="+r+"&pageSize="+s)]:[3,2];case 1:return i=n.sent().data,c("fetchColumns",i),[2,i];case 2:return[2]}}))}))},fetchColumn:function(e,t){var a=e.state,c=e.commit;return Object(n["b"])(this,void 0,void 0,(function(){var e;return Object(n["c"])(this,(function(n){switch(n.label){case 0:return a.columns.data[t]?[3,2]:[4,ht.a.get("/columns/"+t)];case 1:return e=n.sent().data,c("fetchColumn",e),[2,e];case 2:return[2]}}))}))},fetchPosts:function(e,t){var a=e.state,c=e.commit;return void 0===t&&(t={}),Object(n["b"])(this,void 0,void 0,(function(){var e,r,o,s,i,l;return Object(n["c"])(this,(function(n){switch(n.label){case 0:return e=t.cid,r=t.currentPage,o=void 0===r?1:r,s=t.pageSize,i=void 0===s?6:s,!a.posts.loadedColumns[e]||a.posts.loadedColumns[e].currentPage<o?[4,ht.a.get("/columns/"+e+"/posts?currentPage="+o+"&pageSize="+i)]:[3,2];case 1:return l=n.sent().data,c("fetchPosts",{rawData:l,cid:e}),[2,l];case 2:return[2]}}))}))},fetchPost:function(e,t){var a=e.state,c=e.commit;return Object(n["b"])(this,void 0,void 0,(function(){var e,r;return Object(n["c"])(this,(function(n){switch(n.label){case 0:return e=a.posts.data[t],e&&e.content?[3,2]:[4,ht.a.get("/posts/"+t)];case 1:return r=n.sent().data,c("fetchPost",r),[2,r];case 2:return[2,Promise.resolve({data:e})]}}))}))},deletePost:function(e,t){var a=e.commit;return Object(n["b"])(this,void 0,void 0,(function(){var e;return Object(n["c"])(this,(function(n){switch(n.label){case 0:return[4,ht.a.delete("/posts/"+t)];case 1:return e=n.sent().data,a("deletePost",e),[2,e]}}))}))},createPost:function(e,t){var a=e.commit;return Object(n["b"])(this,void 0,void 0,(function(){var e;return Object(n["c"])(this,(function(n){switch(n.label){case 0:return[4,ht.a.post("/posts",t)];case 1:return e=n.sent().data,a("createPost",e),[2,e]}}))}))},login:function(e,t){var a=e.commit;return Object(n["b"])(this,void 0,void 0,(function(){var e;return Object(n["c"])(this,(function(n){switch(n.label){case 0:return[4,ht.a.post("/user/login",t)];case 1:return e=n.sent().data,a("login",e),[2,e]}}))}))},fetchCurrentUser:function(e){var t=e.commit;return Object(n["b"])(this,void 0,void 0,(function(){var e;return Object(n["c"])(this,(function(a){switch(a.label){case 0:return[4,ht.a.get("/user/current")];case 1:return e=a.sent().data,t("fetchCurrentUser",e),[2,e]}}))}))},updatePost:function(e,t){var a=e.commit,c=t.id,r=t.payload;return Object(n["b"])(this,void 0,void 0,(function(){var e;return Object(n["c"])(this,(function(t){switch(t.label){case 0:return[4,ht.a.patch("/posts/"+c,r)];case 1:return e=t.sent().data,a("updatePost",e),[2,e]}}))}))}},getters:{getColumns:function(e){return Dt(e.columns.data)},getColumnById:function(e){return function(t){return e.columns.data[t]}},getPostsByCid:function(e){return function(t){return Dt(e.posts.data).filter((function(e){return e.column===t}))}},getPostById:function(e){return function(t){return e.posts.data[t]}}}}),ya=ga,ha=Object(te["b"])(),wa=Object(te["a"])({history:ha,routes:[{path:"/",name:"home",component:ye},{path:"/login",name:"login",component:Ne,meta:{redirectAlreadyLogin:!0}},{path:"/signup",name:"signup",component:Nt},{path:"/column/:id",name:"column",component:ot},{path:"/posts/:id",name:"post",component:Aa},{path:"/create",name:"create",component:Mt,meta:{requiredLogin:!0}}]});wa.beforeEach((function(e,t,a){var n=ya.state,c=n.user,r=n.token,o=e.meta,s=o.requiredLogin,i=o.redirectAlreadyLogin;c.isLogin?i?a("/"):a():r?(ht.a.defaults.headers.common.Authorization="Bearer "+r,ya.dispatch("fetchCurrentUser").then((function(){i?a("/"):a()})).catch((function(e){console.log(e),ya.commit("logout"),a("/login")}))):s?a("/login"):a()}));var Pa=wa;ht.a.defaults.baseURL="http://apis.imooc.com/api/",ht.a.interceptors.request.use((function(e){return e.params=Object(n["a"])(Object(n["a"])({},e.params),{icode:"E2809197D1FD7200"}),e.data instanceof FormData?e.data.append("icode","E2809197D1FD7200"):e.data=Object(n["a"])(Object(n["a"])({},e.data),{icode:"E2809197D1FD7200"}),ya.commit("setLoading",!0),ya.commit("setError",{status:!1}),e})),ht.a.interceptors.response.use((function(e){return ya.commit("setLoading",!1),e}),(function(e){var t=e.response.data.error;throw ya.commit("setError",{status:!0,message:t}),ya.commit("setLoading",!1),e}));var ka=Object(c["d"])(ee);ka.use(Pa),ka.use(ya),ka.mount("#app")},d83b:function(e,t,a){"use strict";a("8b36")},f8c6:function(e,t,a){"use strict";a("6fdc")}});
//# sourceMappingURL=app.6e5573df.js.map